<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>要認証ページ</title>
</head>
<body>
  <div>
    <button id="getUserInfo">ユーザー情報取得</button>
  </div>
  <div>
    <button id="logout">ログアウト</button>
  </div>
  <script>
    document.getElementById('getUserInfo').addEventListener('click', async function () {
      try {
        const response = await fetch('/api/auth/userInfo', {
          method: 'GET',
          credentials: 'include'
        })

        if (response.status == 401) {
          alert('認証されていません。')
          return
        }

        const data = await response.json()
        alert(JSON.stringify(data, null, 2))
      } catch (error) {
        console.error('Error:', error)
      }
    });

    // ログアウト
    document.getElementById('logout').addEventListener('click', async function () {
      await fetch('/api/auth/logout', {
        method: 'POST',
        credentials: 'include'
      })
      window.location.href = '/login.html'
    });
  </script>
</body>
</html>